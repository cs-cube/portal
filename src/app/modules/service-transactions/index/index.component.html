<div *ngIf="stations">
    <h1>Choose Station</h1>
    <div class="row">
        <div class="col-lg-3" *ngFor="let station of stations">
            <mat-card>
                <mat-card-header>
                    <mat-card-title-group>
                        <mat-card-title>
                            <mat-icon>desktop_windows</mat-icon>
                            {{ station.description }}
                        </mat-card-title>
                    </mat-card-title-group>
                </mat-card-header>
                <mat-card-content>
                    <div *ngIf="station.current_session">
                        Logged User: <span class="text-primary">{{ station.current_session.user.fullname }}</span>
                        <br><br>

                        <a [routerLink]="'/service-transactions/' + station.id" mat-raised-button color="primary">View Transactions</a>
                    </div>
                    <div class="text-muted" *ngIf="station.current_session == null">
                        <span *ngIf="station.previous_session">
                          Last used by {{ station.previous_session.user.firstname }} {{ station.previous_session.time_out | parseDate | dfnsDistanceInWordsToNow }} ago
                        </span>
                        <br>
                        <br>
                        <button (click)="useStation(station)" mat-raised-button color="primary" [disabled]="isJoining">{{ isJoining ? 'Processing...' : 'Use' }}</button>
                    </div>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
</div>

<h1 *ngIf="fetchingStations">Loading Stations...</h1>