<h2 mat-dialog-title><i class="fa fa-print"></i> New Print Transaction</h2>
<mat-dialog-content class="mat-typography">

  <div class="row">
    <div class="col-lg-3">
      <mat-form-field class="full-width">
        <mat-label>Member</mat-label>
        <mat-select [(ngModel)]="transaction.member_id" [disabled]="true">
          <mat-option *ngFor="let member of members" [value]="member.id">
            {{ member.fullname }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="col-lg-3">

      <mat-form-field class="full-width">
        <mat-label>Transacttion Time</mat-label>
        <input matInput disabled [(ngModel)]="transaction.time" value="Sushi">
      </mat-form-field>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <table mat-table [dataSource]="transaction_items"  class="full-width">


        <ng-container matColumnDef="size">
            <th mat-header-cell *matHeaderCellDef style="width: 20%;"> Size </th>
            <td mat-cell *matCellDef="let transaction_item" class="pr-3">

                <span *ngIf="transaction_item.valid">{{ transaction_item.size_label }}</span>


                <mat-form-field *ngIf="!transaction_item.valid">
                  <mat-select aria-placeholder="Size" [(ngModel)]="transaction_item.size">
                    <mat-option *ngFor="let size of sizes" [value]="size.value">{{ size.label }}</mat-option>
                  </mat-select>
                </mat-form-field>

            </td>
        </ng-container>

        <ng-container matColumnDef="quality">
          <th mat-header-cell *matHeaderCellDef style="width: 20%;"> Quality </th>
          <td mat-cell *matCellDef="let transaction_item" class="p-2">

            <span *ngIf="transaction_item.valid">{{ transaction_item.quality_label }}</span>

            <mat-form-field *ngIf="!transaction_item.valid">
              <mat-select aria-placeholder="Quality" [(ngModel)]="transaction_item.quality">
                <mat-option *ngFor="let quality of qualities" [value]="quality.value">{{ quality.label }}</mat-option>
              </mat-select>
            </mat-form-field>

          </td>
        </ng-container>

        <ng-container matColumnDef="quantity">
          <th mat-header-cell *matHeaderCellDef style="width: 20%;"> Quantity </th>
          <td mat-cell *matCellDef="let transaction_item" class="text-center">

            <span *ngIf="transaction_item.valid">{{ transaction_item.quantity }}</span>

            <mat-form-field *ngIf="!transaction_item.valid && transaction_item.is_ready">
              <input matInput [(ngModel)]="transaction_item.quantity" class="text-center" type="number" autocomplete="off" min=1>
            </mat-form-field>

          </td>
        </ng-container>

        <ng-container matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef style="width: 20%;" class="text-center"> Price </th>
          <td mat-cell *matCellDef="let transaction_item" class="text-center">
              <span *ngIf="transaction_item.is_ready">{{ transaction_item.price }}</span>
          </td>
        </ng-container>


        <ng-container matColumnDef="total" style="width: 10%;">
          <th mat-header-cell *matHeaderCellDef class="text-center"> Total </th>
          <td mat-cell *matCellDef="let transaction_item" class="text-center">
            <span *ngIf="transaction_item.is_ready">{{ transaction_item.total }}</span>
          </td>
        </ng-container>


        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef> </th>
          <td mat-cell *matCellDef="let transaction_item">
              <button *ngIf="!transaction_item.valid" mat-raised-button (click)="addItem(transaction_item)"><i class="fa fa-plus"></i></button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="transactionItemTableColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: transactionItemTableColumns;"></tr>

      </table>
    </div>
  </div>

</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-raised-button (click)="saveTransaction()" [disabled]="transaction_items.data.length <= 1 || !transaction_items.data[0].is_ready"><mat-icon>save</mat-icon> Save Transaction</button>
  <button mat-button mat-dialog-close><mat-icon>remove</mat-icon> Cancel</button>
</mat-dialog-actions>
