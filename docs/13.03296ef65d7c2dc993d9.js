(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{BJHQ:function(t,r,e){"use strict";e.r(r);var a=e("H6It"),o=e("Valr"),n=e("4YGV"),s=e("QJY3"),c=e("4ohX"),i=e("TYT/"),b=e("CFL1"),m=e("WHFS"),u=e("DUip"),f=e("6onV"),l=e("17Os"),d=e("eJds"),h=e("eHTH"),p=e("cSbt"),v=e("DjAo"),w=e("p+mS");function g(t,r){1&t&&(i.Xb(0,"mat-card-content"),i.Sb(1,"app-ellipis-loading"),i.Wb())}function W(t,r){if(1&t&&(i.Xb(0,"div",11),i.Lc(1),i.Wb()),2&t){var e=i.nc(2);i.Db(1),i.Nc(" ",e.error," ")}}function X(t,r){if(1&t){var e=i.Yb();i.Xb(0,"mat-card-content"),i.Jc(1,W,2,1,"div",5),i.Xb(2,"mat-form-field",6),i.Sb(3,"input",7),i.Xb(4,"mat-error"),i.Lc(5),i.Wb(),i.Wb(),i.Xb(6,"mat-form-field",6),i.Sb(7,"input",8),i.Xb(8,"mat-error"),i.Lc(9),i.Wb(),i.Wb(),i.Sb(10,"br"),i.Sb(11,"br"),i.Sb(12,"br"),i.Xb(13,"mat-form-field",6),i.Sb(14,"input",9),i.Xb(15,"mat-error"),i.Lc(16),i.Wb(),i.Wb(),i.Xb(17,"mat-checkbox",10),i.jc("change",(function(t){i.Cc(e);var r=i.nc();return r.resetPassword=!r.resetPassword})),i.Lc(18,"Reset Password to "),i.Xb(19,"strong"),i.Lc(20),i.Wb(),i.Wb(),i.Wb()}if(2&t){var a=i.nc();i.Db(1),i.tc("ngIf",a.error),i.Db(2),i.tc("formControl",a.form.controls.firstname),i.Db(2),i.Mc(a.form.controls.firstname.errors),i.Db(2),i.tc("formControl",a.form.controls.lastname),i.Db(2),i.Mc(a.form.controls.lastname.errors),i.Db(5),i.tc("formControl",a.form.controls.username),i.Db(2),i.Mc(a.form.controls.username.errors),i.Db(1),i.tc("checked",a.resetPassword),i.Db(3),i.Mc(a.randomPassword)}}function D(t,r){1&t&&(i.Xb(0,"mat-card-actions"),i.Xb(1,"button",12),i.Sb(2,"i",13),i.Lc(3," Submit"),i.Wb(),i.Xb(4,"button",14),i.Sb(5,"i",15),i.Lc(6," Cancel"),i.Wb(),i.Wb())}var S=function(){function t(t,r,e,a,o){this.userService=t,this.modalService=r,this.router=e,this.activatedRoute=a,this.store=o,this.isFetching=!0,this.resetPassword=!1,this.form=new s.e({username:new s.c(""),firstname:new s.c(""),lastname:new s.c("")})}return t.prototype.ngOnInit=function(){var t=this;this.userId=this.activatedRoute.snapshot.params.id,this.isFetching=!0,this.userService.read(this.userId).subscribe((function(r){t.form.setValue({username:r.username,firstname:r.firstname,lastname:r.lastname}),t.isFetching=!1,t.randomizePassword()}))},t.prototype.submit=function(){var t=this;if(this.form.valid){var r=new n.a;r.id=this.userId,r.username=this.form.controls.username.value,r.firstname=this.form.controls.firstname.value,r.lastname=this.form.controls.lastname.value,r.password=this.randomPassword,r.reset_password=this.resetPassword,this.userService.update(r).subscribe((function(r){t.store.dispatch(new c.d(r)),t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["/users"])}),(function(r){for(var e in r.error.errors)t.form.controls.hasOwnProperty(e)&&t.form.controls[e].setErrors(r.error.errors[e])}))}},t.prototype.randomizePassword=function(){for(var t="",r="0123456789".length,e=0;e<6;e++)t+="0123456789".charAt(Math.floor(Math.random()*r));this.randomPassword=t},t.\u0275fac=function(r){return new(r||t)(i.Rb(b.a),i.Rb(m.a),i.Rb(u.g),i.Rb(u.a),i.Rb(f.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["app-edit"]],decls:10,vars:4,consts:[[1,"fa","fa-user-edit"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl"],["matInput","","placeholder","Lastname",3,"formControl"],["matInput","","placeholder","Username",3,"formControl"],["color","primary",3,"checked","change"],[1,"alert","alert-danger"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","/users"],[1,"fa","fa-times"]],template:function(t,r){1&t&&(i.Xb(0,"h1"),i.Sb(1,"i",0),i.Lc(2," Edit User Account\n"),i.Wb(),i.Xb(3,"form",1),i.jc("submit",(function(t){return r.submit()})),i.Xb(4,"div",2),i.Xb(5,"div",3),i.Xb(6,"mat-card"),i.Jc(7,g,2,0,"mat-card-content",4),i.Jc(8,X,21,9,"mat-card-content",4),i.Jc(9,D,7,0,"mat-card-actions",4),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&t&&(i.Db(3),i.tc("formGroup",r.form),i.Db(4),i.tc("ngIf",r.isFetching),i.Db(1),i.tc("ngIf",0==r.isFetching),i.Db(1),i.tc("ngIf",0==r.isFetching))},directives:[s.t,s.l,s.f,l.a,o.m,l.c,d.a,h.b,p.a,s.b,s.k,s.d,h.a,v.a,l.b,w.b,u.h],styles:[""]}),t}();function L(t,r){if(1&t&&(i.Xb(0,"div",13),i.Lc(1),i.Wb()),2&t){var e=i.nc();i.Db(1),i.Nc(" ",e.error," ")}}var y=function(){function t(t,r,e,a){this.userService=t,this.modalService=r,this.router=e,this.store=a,this.form=new s.e({username:new s.c(""),firstname:new s.c(""),lastname:new s.c(""),password:new s.c("")})}return t.prototype.ngOnInit=function(){this.randomizePassword(),this.form.controls.username.disable()},t.prototype.setUsername=function(){var t=this.form.controls.firstname.value,r=this.form.controls.lastname.value;t.trim().length>0&&r.trim().length>0?this.form.controls.username.setValue((t.charAt(0)+"."+r).toLowerCase()):this.form.controls.username.setValue("")},t.prototype.randomizePassword=function(){for(var t="0123456789".length,r=0;r<6;r++)"0123456789".charAt(Math.floor(Math.random()*t));this.form.controls.password.setValue("password")},t.prototype.submit=function(){var t=this;if(this.form.valid){var r=new n.a;r.username=this.form.controls.username.value,r.firstname=this.form.controls.firstname.value,r.lastname=this.form.controls.lastname.value,r.password=this.form.controls.password.value,this.userService.create(r).subscribe((function(r){t.store.dispatch(new c.b(r)),t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["/users"])}),(function(r){for(var e in r.error.errors)t.form.controls.hasOwnProperty(e)&&("username"==e&&"The username field is required."!=r.error.errors[e]&&t.form.controls.username.enable(),t.form.controls[e].setErrors(r.error.errors[e]))}))}},t.\u0275fac=function(r){return new(r||t)(i.Rb(b.a),i.Rb(m.a),i.Rb(u.g),i.Rb(f.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["app-create"]],decls:36,vars:9,consts:[[1,"fa","fa-user-plus"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Lastname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Username",3,"formControl"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","/users"],[1,"fa","fa-times"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(i.Xb(0,"h1"),i.Sb(1,"i",0),i.Lc(2," Create User Account\n"),i.Wb(),i.Xb(3,"form",1),i.jc("submit",(function(t){return r.submit()})),i.Xb(4,"div",2),i.Xb(5,"div",3),i.Xb(6,"mat-card"),i.Xb(7,"mat-card-content"),i.Jc(8,L,2,1,"div",4),i.Xb(9,"mat-form-field",5),i.Xb(10,"input",6),i.jc("change",(function(t){return r.setUsername()}))("keydown",(function(t){return r.setUsername()}))("keyup",(function(t){return r.setUsername()})),i.Wb(),i.Xb(11,"mat-error"),i.Lc(12),i.Wb(),i.Wb(),i.Xb(13,"mat-form-field",5),i.Xb(14,"input",7),i.jc("change",(function(t){return r.setUsername()}))("keydown",(function(t){return r.setUsername()}))("keyup",(function(t){return r.setUsername()})),i.Wb(),i.Xb(15,"mat-error"),i.Lc(16),i.Wb(),i.Wb(),i.Sb(17,"br"),i.Sb(18,"br"),i.Sb(19,"br"),i.Xb(20,"mat-form-field",5),i.Sb(21,"input",8),i.Xb(22,"mat-error"),i.Lc(23),i.Wb(),i.Wb(),i.Sb(24,"br"),i.Sb(25,"br"),i.Lc(26," Password: "),i.Xb(27,"strong"),i.Lc(28),i.Wb(),i.Wb(),i.Xb(29,"mat-card-actions"),i.Xb(30,"button",9),i.Sb(31,"i",10),i.Lc(32," Submit"),i.Wb(),i.Xb(33,"button",11),i.Sb(34,"i",12),i.Lc(35," Cancel"),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Wb(),i.Wb()),2&t&&(i.Db(3),i.tc("formGroup",r.form),i.Db(5),i.tc("ngIf",r.error),i.Db(2),i.tc("formControl",r.form.controls.firstname),i.Db(2),i.Mc(r.form.controls.firstname.errors),i.Db(2),i.tc("formControl",r.form.controls.lastname),i.Db(2),i.Mc(r.form.controls.lastname.errors),i.Db(5),i.tc("formControl",r.form.controls.username),i.Db(2),i.Mc(r.form.controls.username.errors),i.Db(5),i.Mc(r.form.controls.password.value))},directives:[s.t,s.l,s.f,l.a,l.c,o.m,h.b,p.a,s.b,s.k,s.d,h.a,l.b,w.b,u.h],styles:[""]}),t}(),C=e("iPKQ"),I=e("ETwC"),k=e("/RhQ");function U(t,r){if(1&t){var e=i.Yb();i.Xb(0,"mat-form-field"),i.Xb(1,"input",4),i.jc("ngModelChange",(function(t){return i.Cc(e),i.nc().queryParams.q=t}))("keydown.enter",(function(t){return i.Cc(e),i.nc().fetchUsers()})),i.Wb(),i.Xb(2,"button",5),i.Sb(3,"i",6),i.Wb(),i.Wb()}if(2&t){var a=i.nc();i.Db(1),i.tc("ngModel",a.queryParams.q)}}function J(t,r){1&t&&i.Sb(0,"app-ellipis-loading")}function P(t,r){1&t&&(i.Xb(0,"th",17),i.Lc(1," Username "),i.Wb())}function R(t,r){if(1&t&&(i.Xb(0,"td",18),i.Sb(1,"i",19),i.Lc(2),i.Wb()),2&t){var e=r.$implicit;i.Db(2),i.Nc(" ",e.username," ")}}function M(t,r){1&t&&(i.Xb(0,"th",17),i.Lc(1," Firstname "),i.Wb())}function F(t,r){if(1&t&&(i.Xb(0,"td",18),i.Lc(1),i.oc(2,"titlecase"),i.Wb()),2&t){var e=r.$implicit;i.Db(1),i.Nc(" ",i.pc(2,1,e.firstname)," ")}}function V(t,r){1&t&&(i.Xb(0,"th",17),i.Lc(1," Lastname "),i.Wb())}function j(t,r){if(1&t&&(i.Xb(0,"td",18),i.Lc(1),i.oc(2,"titlecase"),i.Wb()),2&t){var e=r.$implicit;i.Db(1),i.Nc(" ",i.pc(2,1,e.lastname)," ")}}function A(t,r){1&t&&(i.Xb(0,"th",17),i.Lc(1," Created "),i.Wb())}function q(t,r){if(1&t&&(i.Xb(0,"td",18),i.Lc(1),i.oc(2,"titlecase"),i.oc(3,"dfnsDistanceInWordsToNow"),i.oc(4,"parseDate"),i.Wb()),2&t){var e=r.$implicit;i.Db(1),i.Nc(" ",i.pc(2,1,i.pc(3,3,i.pc(4,5,e.created_at)))," ago")}}function O(t,r){1&t&&(i.Xb(0,"th",17),i.Lc(1," Actions "),i.Wb())}function H(t,r){if(1&t&&(i.Xb(0,"td",18),i.Xb(1,"button",20),i.Sb(2,"i",21),i.Wb(),i.Wb()),2&t){var e=r.$implicit;i.Db(1),i.tc("routerLink","/users/"+e.id+"/edit")}}function N(t,r){1&t&&i.Sb(0,"tr",22)}function T(t,r){1&t&&i.Sb(0,"tr",23)}function x(t,r){if(1&t&&(i.Xb(0,"table",7),i.Vb(1,8),i.Jc(2,P,2,0,"th",9),i.Jc(3,R,3,1,"td",10),i.Ub(),i.Vb(4,11),i.Jc(5,M,2,0,"th",9),i.Jc(6,F,3,3,"td",10),i.Ub(),i.Vb(7,12),i.Jc(8,V,2,0,"th",9),i.Jc(9,j,3,3,"td",10),i.Ub(),i.Vb(10,13),i.Jc(11,A,2,0,"th",9),i.Jc(12,q,5,7,"td",10),i.Ub(),i.Vb(13,14),i.Jc(14,O,2,0,"th",9),i.Jc(15,H,3,1,"td",10),i.Ub(),i.Jc(16,N,1,0,"tr",15),i.Jc(17,T,1,0,"tr",16),i.Wb()),2&t){var e=i.nc();i.tc("dataSource",e.users),i.Db(16),i.tc("matHeaderRowDef",e.displayedColumns),i.Db(1),i.tc("matRowDefColumns",e.displayedColumns)}}var G=function(){function t(t,r,e){var a=this;this.userService=t,this.authService=r,this.store=e,this.displayedColumns=["username","firstname","lastname","created_at","actions"],this.users=[],this.queryParams={q:"",page:1},this.meta={},this.d=new Date,this.isLoading=!1,r.user$.subscribe((function(t){a.user=t})),this.store.select("users").subscribe((function(t){a.users=t}))}return t.prototype.ngOnInit=function(){this.fetchUsers()},t.prototype.fetchUsers=function(){var t=this;this.isLoading=!0,this.userService.query({params:this.queryParams}).subscribe((function(r){t.meta=t.userService.getMeta(),t.isLoading=!1,t.store.dispatch(new c.c(r))}))},t.prototype.makeid=function(t){for(var r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=e.length,o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*a));return r},t.\u0275fac=function(r){return new(r||t)(i.Rb(b.a),i.Rb(C.a),i.Rb(f.a))},t.\u0275cmp=i.Lb({type:t,selectors:[["app-index"]],decls:13,vars:3,consts:[[1,"fa","fa-users"],["mat-raised-button","","color","primary","routerLink","/users/create","rou",""],[4,"ngIf"],["mat-table","","class","mat-elevation-28",3,"dataSource",4,"ngIf"],["matInput","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear"],[1,"fa","fa-search"],["mat-table","",1,"mat-elevation-28",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","created_at"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"fa","fa-user-circle"],["mat-raised-button","","color","basic",3,"routerLink"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(i.Xb(0,"h1"),i.Sb(1,"i",0),i.Lc(2," Users "),i.Xb(3,"a",1),i.Lc(4,"New"),i.Wb(),i.Wb(),i.Xb(5,"mat-card"),i.Xb(6,"mat-card-header"),i.Jc(7,U,4,1,"mat-form-field",2),i.Wb(),i.Xb(8,"mat-card-content"),i.Jc(9,J,1,0,"app-ellipis-loading",2),i.Jc(10,x,18,3,"table",3),i.Sb(11,"br"),i.Sb(12,"br"),i.Wb(),i.Wb()),2&t&&(i.Db(7),i.tc("ngIf",0==r.isLoading),i.Db(2),i.tc("ngIf",r.isLoading),i.Db(1),i.tc("ngIf",0==r.isLoading||r.users))},directives:[w.a,u.j,l.a,l.d,o.m,l.c,h.b,p.a,s.b,s.k,s.n,w.b,h.f,d.a,I.j,I.c,I.e,I.b,I.g,I.i,I.d,I.a,u.h,I.f,I.h],pipes:[o.u,a.c,k.a],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t}(),Y=e("PAkU"),$=[{path:"",component:G},{path:"create",component:y,canActivate:[Y.a]},{path:":id/edit",component:S,canActivate:[Y.a]}],z=function(){function t(){}return t.\u0275mod=i.Pb({type:t}),t.\u0275inj=i.Ob({factory:function(r){return new(r||t)},imports:[[u.k.forChild($)],u.k]}),t}(),E=e("FpXt");e.d(r,"UsersModule",(function(){return Q}));var Q=function(){function t(){}return t.\u0275mod=i.Pb({type:t}),t.\u0275inj=i.Ob({factory:function(r){return new(r||t)},imports:[[o.c,z,E.a,a.b.forRoot()]]}),t}()}}]);