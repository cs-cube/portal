(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{BJHQ:function(t,r,e){"use strict";e.r(r);var a=e("H6It"),o=e("Valr"),n=e("4YGV"),s=e("QJY3"),c=e("TYT/"),i=e("CFL1"),b=e("WHFS"),m=e("DUip"),u=e("17Os"),f=e("eJds"),l=e("eHTH"),d=e("cSbt"),p=e("DjAo"),h=e("p+mS");function v(t,r){1&t&&(c.Xb(0,"mat-card-content"),c.Sb(1,"app-ellipis-loading"),c.Wb())}function w(t,r){if(1&t&&(c.Xb(0,"div",11),c.Lc(1),c.Wb()),2&t){var e=c.nc(2);c.Db(1),c.Nc(" ",e.error," ")}}function g(t,r){if(1&t){var e=c.Yb();c.Xb(0,"mat-card-content"),c.Jc(1,w,2,1,"div",5),c.Xb(2,"mat-form-field",6),c.Sb(3,"input",7),c.Xb(4,"mat-error"),c.Lc(5),c.Wb(),c.Wb(),c.Xb(6,"mat-form-field",6),c.Sb(7,"input",8),c.Xb(8,"mat-error"),c.Lc(9),c.Wb(),c.Wb(),c.Sb(10,"br"),c.Sb(11,"br"),c.Sb(12,"br"),c.Xb(13,"mat-form-field",6),c.Sb(14,"input",9),c.Xb(15,"mat-error"),c.Lc(16),c.Wb(),c.Wb(),c.Xb(17,"mat-checkbox",10),c.jc("change",(function(t){c.Cc(e);var r=c.nc();return r.resetPassword=!r.resetPassword})),c.Lc(18,"Reset Password to "),c.Xb(19,"strong"),c.Lc(20),c.Wb(),c.Wb(),c.Wb()}if(2&t){var a=c.nc();c.Db(1),c.tc("ngIf",a.error),c.Db(2),c.tc("formControl",a.form.controls.firstname),c.Db(2),c.Mc(a.form.controls.firstname.errors),c.Db(2),c.tc("formControl",a.form.controls.lastname),c.Db(2),c.Mc(a.form.controls.lastname.errors),c.Db(5),c.tc("formControl",a.form.controls.username),c.Db(2),c.Mc(a.form.controls.username.errors),c.Db(1),c.tc("checked",a.resetPassword),c.Db(3),c.Mc(a.randomPassword)}}function W(t,r){1&t&&(c.Xb(0,"mat-card-actions"),c.Xb(1,"button",12),c.Sb(2,"i",13),c.Lc(3," Submit"),c.Wb(),c.Xb(4,"button",14),c.Sb(5,"i",15),c.Lc(6," Cancel"),c.Wb(),c.Wb())}var X=function(){function t(t,r,e,a){this.userService=t,this.modalService=r,this.router=e,this.activatedRoute=a,this.isFetching=!0,this.resetPassword=!1,this.form=new s.e({username:new s.c(""),firstname:new s.c(""),lastname:new s.c("")})}return t.prototype.ngOnInit=function(){var t=this;this.userId=this.activatedRoute.snapshot.params.id,this.isFetching=!0,this.userService.read(this.userId).subscribe((function(r){t.form.setValue({username:r.username,firstname:r.firstname,lastname:r.lastname}),t.isFetching=!1,t.randomizePassword()}))},t.prototype.submit=function(){var t=this;if(this.form.valid){var r=new n.a;r.id=this.userId,r.username=this.form.controls.username.value,r.firstname=this.form.controls.firstname.value,r.lastname=this.form.controls.lastname.value,r.password=this.randomPassword,r.reset_password=this.resetPassword,this.userService.update(r).subscribe((function(){t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["/users"])}),(function(r){for(var e in r.error.errors)t.form.controls.hasOwnProperty(e)&&t.form.controls[e].setErrors(r.error.errors[e])}))}},t.prototype.randomizePassword=function(){for(var t="",r="0123456789".length,e=0;e<6;e++)t+="0123456789".charAt(Math.floor(Math.random()*r));this.randomPassword=t},t.\u0275fac=function(r){return new(r||t)(c.Rb(i.a),c.Rb(b.a),c.Rb(m.g),c.Rb(m.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-edit"]],decls:10,vars:4,consts:[[1,"fa","fa-user-edit"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl"],["matInput","","placeholder","Lastname",3,"formControl"],["matInput","","placeholder","Username",3,"formControl"],["color","primary",3,"checked","change"],[1,"alert","alert-danger"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","/users"],[1,"fa","fa-times"]],template:function(t,r){1&t&&(c.Xb(0,"h1"),c.Sb(1,"i",0),c.Lc(2," Edit User Account\n"),c.Wb(),c.Xb(3,"form",1),c.jc("submit",(function(t){return r.submit()})),c.Xb(4,"div",2),c.Xb(5,"div",3),c.Xb(6,"mat-card"),c.Jc(7,v,2,0,"mat-card-content",4),c.Jc(8,g,21,9,"mat-card-content",4),c.Jc(9,W,7,0,"mat-card-actions",4),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Db(3),c.tc("formGroup",r.form),c.Db(4),c.tc("ngIf",r.isFetching),c.Db(1),c.tc("ngIf",0==r.isFetching),c.Db(1),c.tc("ngIf",0==r.isFetching))},directives:[s.t,s.l,s.f,u.a,o.m,u.c,f.a,l.b,d.a,s.b,s.k,s.d,l.a,p.a,u.b,h.b,m.h],styles:[""]}),t}();function D(t,r){if(1&t&&(c.Xb(0,"div",13),c.Lc(1),c.Wb()),2&t){var e=c.nc();c.Db(1),c.Nc(" ",e.error," ")}}var S=function(){function t(t,r,e){this.userService=t,this.modalService=r,this.router=e,this.form=new s.e({username:new s.c(""),firstname:new s.c(""),lastname:new s.c(""),password:new s.c("")})}return t.prototype.ngOnInit=function(){this.randomizePassword(),this.form.controls.username.disable()},t.prototype.setUsername=function(){var t=this.form.controls.firstname.value,r=this.form.controls.lastname.value;t.trim().length>0&&r.trim().length>0?this.form.controls.username.setValue((t.charAt(0)+"."+r).toLowerCase()):this.form.controls.username.setValue("")},t.prototype.randomizePassword=function(){for(var t="0123456789".length,r=0;r<6;r++)"0123456789".charAt(Math.floor(Math.random()*t));this.form.controls.password.setValue("password")},t.prototype.submit=function(){var t=this;if(this.form.valid){var r=new n.a;r.username=this.form.controls.username.value,r.firstname=this.form.controls.firstname.value,r.lastname=this.form.controls.lastname.value,r.password=this.form.controls.password.value,this.userService.create(r).subscribe((function(){t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["/users"])}),(function(r){for(var e in r.error.errors)t.form.controls.hasOwnProperty(e)&&("username"==e&&"The username field is required."!=r.error.errors[e]&&t.form.controls.username.enable(),t.form.controls[e].setErrors(r.error.errors[e]))}))}},t.\u0275fac=function(r){return new(r||t)(c.Rb(i.a),c.Rb(b.a),c.Rb(m.g))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-create"]],decls:36,vars:9,consts:[[1,"fa","fa-user-plus"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Lastname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Username",3,"formControl"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","/users"],[1,"fa","fa-times"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(c.Xb(0,"h1"),c.Sb(1,"i",0),c.Lc(2," Create User Account\n"),c.Wb(),c.Xb(3,"form",1),c.jc("submit",(function(t){return r.submit()})),c.Xb(4,"div",2),c.Xb(5,"div",3),c.Xb(6,"mat-card"),c.Xb(7,"mat-card-content"),c.Jc(8,D,2,1,"div",4),c.Xb(9,"mat-form-field",5),c.Xb(10,"input",6),c.jc("change",(function(t){return r.setUsername()}))("keydown",(function(t){return r.setUsername()}))("keyup",(function(t){return r.setUsername()})),c.Wb(),c.Xb(11,"mat-error"),c.Lc(12),c.Wb(),c.Wb(),c.Xb(13,"mat-form-field",5),c.Xb(14,"input",7),c.jc("change",(function(t){return r.setUsername()}))("keydown",(function(t){return r.setUsername()}))("keyup",(function(t){return r.setUsername()})),c.Wb(),c.Xb(15,"mat-error"),c.Lc(16),c.Wb(),c.Wb(),c.Sb(17,"br"),c.Sb(18,"br"),c.Sb(19,"br"),c.Xb(20,"mat-form-field",5),c.Sb(21,"input",8),c.Xb(22,"mat-error"),c.Lc(23),c.Wb(),c.Wb(),c.Sb(24,"br"),c.Sb(25,"br"),c.Lc(26," Password: "),c.Xb(27,"strong"),c.Lc(28),c.Wb(),c.Wb(),c.Xb(29,"mat-card-actions"),c.Xb(30,"button",9),c.Sb(31,"i",10),c.Lc(32," Submit"),c.Wb(),c.Xb(33,"button",11),c.Sb(34,"i",12),c.Lc(35," Cancel"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Db(3),c.tc("formGroup",r.form),c.Db(5),c.tc("ngIf",r.error),c.Db(2),c.tc("formControl",r.form.controls.firstname),c.Db(2),c.Mc(r.form.controls.firstname.errors),c.Db(2),c.tc("formControl",r.form.controls.lastname),c.Db(2),c.Mc(r.form.controls.lastname.errors),c.Db(5),c.tc("formControl",r.form.controls.username),c.Db(2),c.Mc(r.form.controls.username.errors),c.Db(5),c.Mc(r.form.controls.password.value))},directives:[s.t,s.l,s.f,u.a,u.c,o.m,l.b,d.a,s.b,s.k,s.d,l.a,u.b,h.b,m.h],styles:[""]}),t}(),L=e("iPKQ"),y=e("ETwC"),C=e("/RhQ");function I(t,r){if(1&t){var e=c.Yb();c.Xb(0,"mat-form-field"),c.Xb(1,"input",4),c.jc("ngModelChange",(function(t){return c.Cc(e),c.nc().queryParams.q=t}))("keydown.enter",(function(t){return c.Cc(e),c.nc().fetchUsers()})),c.Wb(),c.Xb(2,"button",5),c.Sb(3,"i",6),c.Wb(),c.Wb()}if(2&t){var a=c.nc();c.Db(1),c.tc("ngModel",a.queryParams.q)}}function k(t,r){1&t&&c.Sb(0,"app-ellipis-loading")}function U(t,r){1&t&&(c.Xb(0,"th",17),c.Lc(1," Username "),c.Wb())}function J(t,r){if(1&t&&(c.Xb(0,"td",18),c.Sb(1,"i",19),c.Lc(2),c.Wb()),2&t){var e=r.$implicit;c.Db(2),c.Nc(" ",e.username," ")}}function P(t,r){1&t&&(c.Xb(0,"th",17),c.Lc(1," Firstname "),c.Wb())}function M(t,r){if(1&t&&(c.Xb(0,"td",18),c.Lc(1),c.oc(2,"titlecase"),c.Wb()),2&t){var e=r.$implicit;c.Db(1),c.Nc(" ",c.pc(2,1,e.firstname)," ")}}function R(t,r){1&t&&(c.Xb(0,"th",17),c.Lc(1," Lastname "),c.Wb())}function F(t,r){if(1&t&&(c.Xb(0,"td",18),c.Lc(1),c.oc(2,"titlecase"),c.Wb()),2&t){var e=r.$implicit;c.Db(1),c.Nc(" ",c.pc(2,1,e.lastname)," ")}}function j(t,r){1&t&&(c.Xb(0,"th",17),c.Lc(1," Created "),c.Wb())}function A(t,r){if(1&t&&(c.Xb(0,"td",18),c.Lc(1),c.oc(2,"titlecase"),c.oc(3,"dfnsDistanceInWordsToNow"),c.oc(4,"parseDate"),c.Wb()),2&t){var e=r.$implicit;c.Db(1),c.Nc(" ",c.pc(2,1,c.pc(3,3,c.pc(4,5,e.created_at)))," ago")}}function V(t,r){1&t&&(c.Xb(0,"th",17),c.Lc(1," Actions "),c.Wb())}function q(t,r){if(1&t&&(c.Xb(0,"td",18),c.Xb(1,"button",20),c.Sb(2,"i",21),c.Wb(),c.Wb()),2&t){var e=r.$implicit;c.Db(1),c.tc("routerLink","/users/"+e.id+"/edit")}}function O(t,r){1&t&&c.Sb(0,"tr",22)}function H(t,r){1&t&&c.Sb(0,"tr",23)}function N(t,r){if(1&t&&(c.Xb(0,"table",7),c.Vb(1,8),c.Jc(2,U,2,0,"th",9),c.Jc(3,J,3,1,"td",10),c.Ub(),c.Vb(4,11),c.Jc(5,P,2,0,"th",9),c.Jc(6,M,3,3,"td",10),c.Ub(),c.Vb(7,12),c.Jc(8,R,2,0,"th",9),c.Jc(9,F,3,3,"td",10),c.Ub(),c.Vb(10,13),c.Jc(11,j,2,0,"th",9),c.Jc(12,A,5,7,"td",10),c.Ub(),c.Vb(13,14),c.Jc(14,V,2,0,"th",9),c.Jc(15,q,3,1,"td",10),c.Ub(),c.Jc(16,O,1,0,"tr",15),c.Jc(17,H,1,0,"tr",16),c.Wb()),2&t){var e=c.nc();c.tc("dataSource",e.users),c.Db(16),c.tc("matHeaderRowDef",e.displayedColumns),c.Db(1),c.tc("matRowDefColumns",e.displayedColumns)}}var T=function(){function t(t,r){var e=this;this.userService=t,this.authService=r,this.displayedColumns=["username","firstname","lastname","created_at","actions"],this.users=[],this.queryParams={q:"",page:1},this.meta={},this.d=new Date,this.isLoading=!1,r.user$.subscribe((function(t){e.user=t}))}return t.prototype.ngOnInit=function(){this.fetchUsers()},t.prototype.fetchUsers=function(){var t=this;this.isLoading=!0,this.userService.query({params:this.queryParams}).subscribe((function(r){t.meta=t.userService.getMeta(),t.users=r,t.isLoading=!1}))},t.prototype.makeid=function(t){for(var r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=e.length,o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*a));return r},t.\u0275fac=function(r){return new(r||t)(c.Rb(i.a),c.Rb(L.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-index"]],decls:13,vars:3,consts:[[1,"fa","fa-users"],["mat-raised-button","","color","primary","routerLink","/users/create","rou",""],[4,"ngIf"],["mat-table","","class","mat-elevation-28",3,"dataSource",4,"ngIf"],["matInput","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear"],[1,"fa","fa-search"],["mat-table","",1,"mat-elevation-28",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","created_at"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"fa","fa-user-circle"],["mat-raised-button","","color","basic",3,"routerLink"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(c.Xb(0,"h1"),c.Sb(1,"i",0),c.Lc(2," Users "),c.Xb(3,"a",1),c.Lc(4,"New"),c.Wb(),c.Wb(),c.Xb(5,"mat-card"),c.Xb(6,"mat-card-header"),c.Jc(7,I,4,1,"mat-form-field",2),c.Wb(),c.Xb(8,"mat-card-content"),c.Jc(9,k,1,0,"app-ellipis-loading",2),c.Jc(10,N,18,3,"table",3),c.Sb(11,"br"),c.Sb(12,"br"),c.Wb(),c.Wb()),2&t&&(c.Db(7),c.tc("ngIf",0==r.isLoading),c.Db(2),c.tc("ngIf",r.isLoading),c.Db(1),c.tc("ngIf",0==r.isLoading))},directives:[h.a,m.j,u.a,u.d,o.m,u.c,l.b,d.a,s.b,s.k,s.n,h.b,l.f,f.a,y.j,y.c,y.e,y.b,y.g,y.i,y.d,y.a,m.h,y.f,y.h],pipes:[o.u,a.c,C.a],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t}(),x=e("PAkU"),G=[{path:"",component:T},{path:"create",component:S,canActivate:[x.a]},{path:":id/edit",component:X,canActivate:[x.a]}],Y=function(){function t(){}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(r){return new(r||t)},imports:[[m.k.forChild(G)],m.k]}),t}(),$=e("FpXt");e.d(r,"UsersModule",(function(){return z}));var z=function(){function t(){}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(r){return new(r||t)},imports:[[o.c,Y,$.a,a.b.forRoot()]]}),t}()}}]);