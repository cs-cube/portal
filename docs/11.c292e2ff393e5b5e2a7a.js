(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{BJHQ:function(t,r,e){"use strict";e.r(r);var a=e("H6It"),o=e("Valr"),n=e("4YGV"),s=e("QJY3"),c=e("TYT/"),i=e("CFL1"),m=e("WHFS"),b=e("DUip"),u=e("17Os"),f=e("eJds"),l=e("eHTH"),d=e("cSbt"),h=e("DjAo"),p=e("p+mS");function v(t,r){1&t&&(c.Wb(0,"mat-card-content"),c.Rb(1,"app-ellipis-loading"),c.Vb())}function w(t,r){if(1&t&&(c.Wb(0,"div",11),c.Kc(1),c.Vb()),2&t){var e=c.mc(2);c.Cb(1),c.Mc(" ",e.error," ")}}function C(t,r){if(1&t){var e=c.Xb();c.Wb(0,"mat-card-content"),c.Ic(1,w,2,1,"div",5),c.Wb(2,"mat-form-field",6),c.Rb(3,"input",7),c.Wb(4,"mat-error"),c.Kc(5),c.Vb(),c.Vb(),c.Wb(6,"mat-form-field",6),c.Rb(7,"input",8),c.Wb(8,"mat-error"),c.Kc(9),c.Vb(),c.Vb(),c.Rb(10,"br"),c.Rb(11,"br"),c.Rb(12,"br"),c.Wb(13,"mat-form-field",6),c.Rb(14,"input",9),c.Wb(15,"mat-error"),c.Kc(16),c.Vb(),c.Vb(),c.Wb(17,"mat-checkbox",10),c.ic("change",(function(t){c.Bc(e);var r=c.mc();return r.resetPassword=!r.resetPassword})),c.Kc(18,"Reset Password to "),c.Wb(19,"strong"),c.Kc(20),c.Vb(),c.Vb(),c.Vb()}if(2&t){var a=c.mc();c.Cb(1),c.sc("ngIf",a.error),c.Cb(2),c.sc("formControl",a.form.controls.firstname),c.Cb(2),c.Lc(a.form.controls.firstname.errors),c.Cb(2),c.sc("formControl",a.form.controls.lastname),c.Cb(2),c.Lc(a.form.controls.lastname.errors),c.Cb(5),c.sc("formControl",a.form.controls.username),c.Cb(2),c.Lc(a.form.controls.username.errors),c.Cb(1),c.sc("checked",a.resetPassword),c.Cb(3),c.Lc(a.randomPassword)}}function g(t,r){1&t&&(c.Wb(0,"mat-card-actions"),c.Wb(1,"button",12),c.Rb(2,"i",13),c.Kc(3," Submit"),c.Vb(),c.Wb(4,"button",14),c.Rb(5,"i",15),c.Kc(6," Cancel"),c.Vb(),c.Vb())}var V=function(){function t(t,r,e,a){this.userService=t,this.modalService=r,this.router=e,this.activatedRoute=a,this.isFetching=!0,this.resetPassword=!1,this.form=new s.e({username:new s.c(""),firstname:new s.c(""),lastname:new s.c("")})}return t.prototype.ngOnInit=function(){var t=this;this.userId=this.activatedRoute.snapshot.params.id,this.isFetching=!0,this.userService.read(this.userId).subscribe((function(r){t.form.setValue({username:r.username,firstname:r.firstname,lastname:r.lastname}),t.isFetching=!1,t.randomizePassword()}))},t.prototype.submit=function(){var t=this;if(this.form.valid){var r=new n.a;r.id=this.userId,r.username=this.form.controls.username.value,r.firstname=this.form.controls.firstname.value,r.lastname=this.form.controls.lastname.value,r.password=this.randomPassword,r.reset_password=this.resetPassword,this.userService.update(r).subscribe((function(){t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["/users"])}),(function(r){for(var e in r.error.errors)t.form.controls.hasOwnProperty(e)&&t.form.controls[e].setErrors(r.error.errors[e])}))}},t.prototype.randomizePassword=function(){for(var t="",r="0123456789".length,e=0;e<6;e++)t+="0123456789".charAt(Math.floor(Math.random()*r));this.randomPassword=t},t.\u0275fac=function(r){return new(r||t)(c.Qb(i.a),c.Qb(m.a),c.Qb(b.g),c.Qb(b.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-edit"]],decls:10,vars:4,consts:[[1,"fa","fa-user-edit"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl"],["matInput","","placeholder","Lastname",3,"formControl"],["matInput","","placeholder","Username",3,"formControl"],["color","primary",3,"checked","change"],[1,"alert","alert-danger"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","/users"],[1,"fa","fa-times"]],template:function(t,r){1&t&&(c.Wb(0,"h1"),c.Rb(1,"i",0),c.Kc(2," Edit User Account\n"),c.Vb(),c.Wb(3,"form",1),c.ic("submit",(function(t){return r.submit()})),c.Wb(4,"div",2),c.Wb(5,"div",3),c.Wb(6,"mat-card"),c.Ic(7,v,2,0,"mat-card-content",4),c.Ic(8,C,21,9,"mat-card-content",4),c.Ic(9,g,7,0,"mat-card-actions",4),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Cb(3),c.sc("formGroup",r.form),c.Cb(4),c.sc("ngIf",r.isFetching),c.Cb(1),c.sc("ngIf",0==r.isFetching),c.Cb(1),c.sc("ngIf",0==r.isFetching))},directives:[s.t,s.l,s.f,u.a,o.m,u.c,f.a,l.b,d.a,s.b,s.k,s.d,l.a,h.a,u.b,p.b,b.h],styles:[""]}),t}();function W(t,r){if(1&t&&(c.Wb(0,"div",13),c.Kc(1),c.Vb()),2&t){var e=c.mc();c.Cb(1),c.Mc(" ",e.error," ")}}var I=function(){function t(t,r,e){this.userService=t,this.modalService=r,this.router=e,this.form=new s.e({username:new s.c(""),firstname:new s.c(""),lastname:new s.c(""),password:new s.c("")})}return t.prototype.ngOnInit=function(){this.randomizePassword(),this.form.controls.username.disable()},t.prototype.setUsername=function(){var t=this.form.controls.firstname.value,r=this.form.controls.lastname.value;t.trim().length>0&&r.trim().length>0?this.form.controls.username.setValue((t.charAt(0)+"."+r).toLowerCase()):this.form.controls.username.setValue("")},t.prototype.randomizePassword=function(){for(var t="0123456789".length,r=0;r<6;r++)"0123456789".charAt(Math.floor(Math.random()*t));this.form.controls.password.setValue("password")},t.prototype.submit=function(){var t=this;if(this.form.valid){var r=new n.a;r.username=this.form.controls.username.value,r.firstname=this.form.controls.firstname.value,r.lastname=this.form.controls.lastname.value,r.password=this.form.controls.password.value,this.userService.create(r).subscribe((function(){t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["/users"])}),(function(r){for(var e in r.error.errors)t.form.controls.hasOwnProperty(e)&&("username"==e&&"The username field is required."!=r.error.errors[e]&&t.form.controls.username.enable(),t.form.controls[e].setErrors(r.error.errors[e]))}))}},t.\u0275fac=function(r){return new(r||t)(c.Qb(i.a),c.Qb(m.a),c.Qb(b.g))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-create"]],decls:36,vars:9,consts:[[1,"fa","fa-user-plus"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Lastname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Username",3,"formControl"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","/users"],[1,"fa","fa-times"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(c.Wb(0,"h1"),c.Rb(1,"i",0),c.Kc(2," Create User Account\n"),c.Vb(),c.Wb(3,"form",1),c.ic("submit",(function(t){return r.submit()})),c.Wb(4,"div",2),c.Wb(5,"div",3),c.Wb(6,"mat-card"),c.Wb(7,"mat-card-content"),c.Ic(8,W,2,1,"div",4),c.Wb(9,"mat-form-field",5),c.Wb(10,"input",6),c.ic("change",(function(t){return r.setUsername()}))("keydown",(function(t){return r.setUsername()}))("keyup",(function(t){return r.setUsername()})),c.Vb(),c.Wb(11,"mat-error"),c.Kc(12),c.Vb(),c.Vb(),c.Wb(13,"mat-form-field",5),c.Wb(14,"input",7),c.ic("change",(function(t){return r.setUsername()}))("keydown",(function(t){return r.setUsername()}))("keyup",(function(t){return r.setUsername()})),c.Vb(),c.Wb(15,"mat-error"),c.Kc(16),c.Vb(),c.Vb(),c.Rb(17,"br"),c.Rb(18,"br"),c.Rb(19,"br"),c.Wb(20,"mat-form-field",5),c.Rb(21,"input",8),c.Wb(22,"mat-error"),c.Kc(23),c.Vb(),c.Vb(),c.Rb(24,"br"),c.Rb(25,"br"),c.Kc(26," Password: "),c.Wb(27,"strong"),c.Kc(28),c.Vb(),c.Vb(),c.Wb(29,"mat-card-actions"),c.Wb(30,"button",9),c.Rb(31,"i",10),c.Kc(32," Submit"),c.Vb(),c.Wb(33,"button",11),c.Rb(34,"i",12),c.Kc(35," Cancel"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Cb(3),c.sc("formGroup",r.form),c.Cb(5),c.sc("ngIf",r.error),c.Cb(2),c.sc("formControl",r.form.controls.firstname),c.Cb(2),c.Lc(r.form.controls.firstname.errors),c.Cb(2),c.sc("formControl",r.form.controls.lastname),c.Cb(2),c.Lc(r.form.controls.lastname.errors),c.Cb(5),c.sc("formControl",r.form.controls.username),c.Cb(2),c.Lc(r.form.controls.username.errors),c.Cb(5),c.Lc(r.form.controls.password.value))},directives:[s.t,s.l,s.f,u.a,u.c,o.m,l.b,d.a,s.b,s.k,s.d,l.a,u.b,p.b,b.h],styles:[""]}),t}(),y=e("iPKQ"),R=e("ETwC"),K=e("/RhQ");function k(t,r){if(1&t){var e=c.Xb();c.Wb(0,"mat-form-field"),c.Wb(1,"input",4),c.ic("ngModelChange",(function(t){return c.Bc(e),c.mc().queryParams.q=t}))("keydown.enter",(function(t){return c.Bc(e),c.mc().fetchUsers()})),c.Vb(),c.Wb(2,"button",5),c.Rb(3,"i",6),c.Vb(),c.Vb()}if(2&t){var a=c.mc();c.Cb(1),c.sc("ngModel",a.queryParams.q)}}function U(t,r){1&t&&c.Rb(0,"app-ellipis-loading")}function L(t,r){1&t&&(c.Wb(0,"th",17),c.Kc(1," Username "),c.Vb())}function P(t,r){if(1&t&&(c.Wb(0,"td",18),c.Rb(1,"i",19),c.Kc(2),c.Vb()),2&t){var e=r.$implicit;c.Cb(2),c.Mc(" ",e.username," ")}}function S(t,r){1&t&&(c.Wb(0,"th",17),c.Kc(1," Firstname "),c.Vb())}function M(t,r){if(1&t&&(c.Wb(0,"td",18),c.Kc(1),c.nc(2,"titlecase"),c.Vb()),2&t){var e=r.$implicit;c.Cb(1),c.Mc(" ",c.oc(2,1,e.firstname)," ")}}function D(t,r){1&t&&(c.Wb(0,"th",17),c.Kc(1," Lastname "),c.Vb())}function Q(t,r){if(1&t&&(c.Wb(0,"td",18),c.Kc(1),c.nc(2,"titlecase"),c.Vb()),2&t){var e=r.$implicit;c.Cb(1),c.Mc(" ",c.oc(2,1,e.lastname)," ")}}function F(t,r){1&t&&(c.Wb(0,"th",17),c.Kc(1," Created "),c.Vb())}function A(t,r){if(1&t&&(c.Wb(0,"td",18),c.Kc(1),c.nc(2,"titlecase"),c.nc(3,"dfnsDistanceInWordsToNow"),c.nc(4,"parseDate"),c.Vb()),2&t){var e=r.$implicit;c.Cb(1),c.Mc(" ",c.oc(2,1,c.oc(3,3,c.oc(4,5,e.created_at)))," ago")}}function T(t,r){1&t&&(c.Wb(0,"th",17),c.Kc(1," Actions "),c.Vb())}function q(t,r){if(1&t&&(c.Wb(0,"td",18),c.Wb(1,"button",20),c.Rb(2,"i",21),c.Vb(),c.Vb()),2&t){var e=r.$implicit;c.Cb(1),c.sc("routerLink","/users/"+e.id+"/edit")}}function O(t,r){1&t&&c.Rb(0,"tr",22)}function H(t,r){1&t&&c.Rb(0,"tr",23)}function j(t,r){if(1&t&&(c.Wb(0,"table",7),c.Ub(1,8),c.Ic(2,L,2,0,"th",9),c.Ic(3,P,3,1,"td",10),c.Tb(),c.Ub(4,11),c.Ic(5,S,2,0,"th",9),c.Ic(6,M,3,3,"td",10),c.Tb(),c.Ub(7,12),c.Ic(8,D,2,0,"th",9),c.Ic(9,Q,3,3,"td",10),c.Tb(),c.Ub(10,13),c.Ic(11,F,2,0,"th",9),c.Ic(12,A,5,7,"td",10),c.Tb(),c.Ub(13,14),c.Ic(14,T,2,0,"th",9),c.Ic(15,q,3,1,"td",10),c.Tb(),c.Ic(16,O,1,0,"tr",15),c.Ic(17,H,1,0,"tr",16),c.Vb()),2&t){var e=c.mc();c.sc("dataSource",e.users),c.Cb(16),c.sc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.sc("matRowDefColumns",e.displayedColumns)}}var x=function(){function t(t,r){var e=this;this.userService=t,this.authService=r,this.displayedColumns=["username","firstname","lastname","created_at","actions"],this.users=[],this.queryParams={q:"",page:1},this.meta={},this.d=new Date,this.isLoading=!1,r.$user.subscribe((function(t){e.user=t}))}return t.prototype.ngOnInit=function(){this.fetchUsers()},t.prototype.fetchUsers=function(){var t=this;this.isLoading=!0,this.userService.query({params:this.queryParams}).subscribe((function(r){t.meta=t.userService.getMeta(),t.users=r,t.isLoading=!1}))},t.prototype.makeid=function(t){for(var r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=e.length,o=0;o<t;o++)r+=e.charAt(Math.floor(Math.random()*a));return r},t.\u0275fac=function(r){return new(r||t)(c.Qb(i.a),c.Qb(y.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-index"]],decls:13,vars:3,consts:[[1,"fa","fa-users"],["mat-raised-button","","color","primary","routerLink","/users/create","rou",""],[4,"ngIf"],["mat-table","","class","mat-elevation-28",3,"dataSource",4,"ngIf"],["matInput","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear"],[1,"fa","fa-search"],["mat-table","",1,"mat-elevation-28",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","created_at"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"fa","fa-user-circle"],["mat-raised-button","","color","basic",3,"routerLink"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(c.Wb(0,"h1"),c.Rb(1,"i",0),c.Kc(2," Users "),c.Wb(3,"a",1),c.Kc(4,"New"),c.Vb(),c.Vb(),c.Wb(5,"mat-card"),c.Wb(6,"mat-card-header"),c.Ic(7,k,4,1,"mat-form-field",2),c.Vb(),c.Wb(8,"mat-card-content"),c.Ic(9,U,1,0,"app-ellipis-loading",2),c.Ic(10,j,18,3,"table",3),c.Rb(11,"br"),c.Rb(12,"br"),c.Vb(),c.Vb()),2&t&&(c.Cb(7),c.sc("ngIf",0==r.isLoading),c.Cb(2),c.sc("ngIf",r.isLoading),c.Cb(1),c.sc("ngIf",0==r.isLoading))},directives:[p.a,b.j,u.a,u.d,o.m,u.c,l.b,d.a,s.b,s.k,s.n,p.b,l.f,f.a,R.j,R.c,R.e,R.b,R.g,R.i,R.d,R.a,b.h,R.f,R.h],pipes:[o.u,a.c,K.a],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t}(),G=e("PAkU"),J=[{path:"",component:x},{path:"create",component:I,canActivate:[G.a]},{path:":id/edit",component:V,canActivate:[G.a]}],$=function(){function t(){}return t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({factory:function(r){return new(r||t)},imports:[[b.k.forChild(J)],b.k]}),t}(),z=e("FpXt");e.d(r,"UsersModule",(function(){return B}));var B=function(){function t(){}return t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({factory:function(r){return new(r||t)},imports:[[o.c,$,z.a,a.b.forRoot()]]}),t}()}}]);