(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{BJHQ:function(t,r,e){"use strict";e.r(r);var o=e("H6It"),n=e("Valr"),a=e("QJY3"),s=e("TYT/"),c=e("mrSG"),i=e("fB3y"),m=e("cUzu"),b=function(t){function r(r){var e=t.call(this,r,"users")||this;return e.http=r,e}return Object(c.b)(r,t),r.\u0275fac=function(t){return new(t||r)(s.ec(m.b))},r.\u0275prov=s.Mb({token:r,factory:r.\u0275fac,providedIn:"root"}),r}(i.a),u=e("WHFS"),f=e("DUip"),l=e("17Os"),d=e("eHTH"),h=e("cSbt"),p=e("DjAo"),w=e("p+mS");function v(t,r){1&t&&(s.Wb(0,"mat-card-content"),s.Wb(1,"span",5),s.Kc(2,"Loading..."),s.Vb(),s.Vb())}function C(t,r){if(1&t&&(s.Wb(0,"div",12),s.Kc(1),s.Vb()),2&t){var e=s.mc(2);s.Cb(1),s.Mc(" ",e.error," ")}}function V(t,r){if(1&t){var e=s.Xb();s.Wb(0,"mat-card-content"),s.Ic(1,C,2,1,"div",6),s.Wb(2,"mat-form-field",7),s.Rb(3,"input",8),s.Wb(4,"mat-error"),s.Kc(5),s.Vb(),s.Vb(),s.Wb(6,"mat-form-field",7),s.Rb(7,"input",9),s.Wb(8,"mat-error"),s.Kc(9),s.Vb(),s.Vb(),s.Rb(10,"br"),s.Rb(11,"br"),s.Rb(12,"br"),s.Wb(13,"mat-form-field",7),s.Rb(14,"input",10),s.Wb(15,"mat-error"),s.Kc(16),s.Vb(),s.Vb(),s.Wb(17,"mat-checkbox",11),s.ic("change",(function(t){s.Bc(e);var r=s.mc();return r.resetPassword=!r.resetPassword})),s.Kc(18,"Reset Password to "),s.Wb(19,"strong"),s.Kc(20),s.Vb(),s.Vb(),s.Vb()}if(2&t){var o=s.mc();s.Cb(1),s.sc("ngIf",o.error),s.Cb(2),s.sc("formControl",o.form.controls.firstname),s.Cb(2),s.Lc(o.form.controls.firstname.errors),s.Cb(2),s.sc("formControl",o.form.controls.lastname),s.Cb(2),s.Lc(o.form.controls.lastname.errors),s.Cb(5),s.sc("formControl",o.form.controls.username),s.Cb(2),s.Lc(o.form.controls.username.errors),s.Cb(1),s.sc("checked",o.resetPassword),s.Cb(3),s.Lc(o.randomPassword)}}function W(t,r){1&t&&(s.Wb(0,"mat-card-actions"),s.Wb(1,"button",13),s.Rb(2,"i",14),s.Kc(3," Submit"),s.Vb(),s.Wb(4,"button",15),s.Rb(5,"i",16),s.Kc(6," Cancel"),s.Vb(),s.Vb())}var g=function(){function t(t,r,e,o){this.userService=t,this.modalService=r,this.router=e,this.activatedRoute=o,this.isFetching=!0,this.resetPassword=!1,this.form=new a.e({username:new a.c(""),firstname:new a.c(""),lastname:new a.c("")})}return t.prototype.ngOnInit=function(){var t=this;this.userId=this.activatedRoute.snapshot.params.id,this.isFetching=!0,this.userService.read(this.userId).subscribe((function(r){t.form.setValue({username:r.username,firstname:r.firstname,lastname:r.lastname}),t.isFetching=!1,t.randomizePassword()}))},t.prototype.submit=function(){var t=this;this.form.valid&&this.userService.update({id:this.userId,username:this.form.controls.username.value,firstname:this.form.controls.firstname.value,lastname:this.form.controls.lastname.value,password:this.randomPassword,reset_password:this.resetPassword}).subscribe((function(){t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["/users"])}),(function(r){for(var e in r.error.errors)t.form.controls.hasOwnProperty(e)&&t.form.controls[e].setErrors(r.error.errors[e])}))},t.prototype.randomizePassword=function(){for(var t="",r="0123456789".length,e=0;e<6;e++)t+="0123456789".charAt(Math.floor(Math.random()*r));this.randomPassword=t},t.\u0275fac=function(r){return new(r||t)(s.Qb(b),s.Qb(u.a),s.Qb(f.g),s.Qb(f.a))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-edit"]],decls:10,vars:4,consts:[[1,"fa","fa-user-edit"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],[4,"ngIf"],[1,"text-muted"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl"],["matInput","","placeholder","Lastname",3,"formControl"],["matInput","","placeholder","Username",3,"formControl"],["color","primary",3,"checked","change"],[1,"alert","alert-danger"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","/users"],[1,"fa","fa-times"]],template:function(t,r){1&t&&(s.Wb(0,"h1"),s.Rb(1,"i",0),s.Kc(2," Edit User Account\n"),s.Vb(),s.Wb(3,"form",1),s.ic("submit",(function(t){return r.submit()})),s.Wb(4,"div",2),s.Wb(5,"div",3),s.Wb(6,"mat-card"),s.Ic(7,v,3,0,"mat-card-content",4),s.Ic(8,V,21,9,"mat-card-content",4),s.Ic(9,W,7,0,"mat-card-actions",4),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&t&&(s.Cb(3),s.sc("formGroup",r.form),s.Cb(4),s.sc("ngIf",r.isFetching),s.Cb(1),s.sc("ngIf",0==r.isFetching),s.Cb(1),s.sc("ngIf",0==r.isFetching))},directives:[a.t,a.l,a.f,l.a,n.m,l.c,d.b,h.a,a.b,a.k,a.d,d.a,p.a,l.b,w.b,f.h],styles:[""]}),t}();function y(t,r){if(1&t&&(s.Wb(0,"div",13),s.Kc(1),s.Vb()),2&t){var e=s.mc();s.Cb(1),s.Mc(" ",e.error," ")}}var I=function(){function t(t,r,e){this.userService=t,this.modalService=r,this.router=e,this.form=new a.e({username:new a.c(""),firstname:new a.c(""),lastname:new a.c(""),password:new a.c("")})}return t.prototype.ngOnInit=function(){this.randomizePassword(),this.form.controls.username.disable()},t.prototype.setUsername=function(){var t=this.form.controls.firstname.value,r=this.form.controls.lastname.value;t.trim().length>0&&r.trim().length>0?this.form.controls.username.setValue((t.charAt(0)+"."+r).toLowerCase()):this.form.controls.username.setValue("")},t.prototype.randomizePassword=function(){for(var t="0123456789".length,r=0;r<6;r++)"0123456789".charAt(Math.floor(Math.random()*t));this.form.controls.password.setValue("password")},t.prototype.submit=function(){var t=this;this.form.valid&&this.userService.create({username:this.form.controls.username.value,firstname:this.form.controls.firstname.value,lastname:this.form.controls.lastname.value,password:this.form.controls.password.value}).subscribe((function(){t.modalService.swal({text:"User succesfully created",icon:"success"}),t.router.navigate(["/users"])}),(function(r){for(var e in r.error.errors)t.form.controls.hasOwnProperty(e)&&("username"==e&&"The username field is required."!=r.error.errors[e]&&t.form.controls.username.enable(),t.form.controls[e].setErrors(r.error.errors[e]))}))},t.\u0275fac=function(r){return new(r||t)(s.Qb(b),s.Qb(u.a),s.Qb(f.g))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-create"]],decls:36,vars:9,consts:[[1,"fa","fa-user-plus"],["autocomplete","off",3,"formGroup","submit"],[1,"row"],[1,"col-lg-4"],["class","alert alert-danger",4,"ngIf"],[1,"full-width"],["matInput","","placeholder","Firstname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Lastname",3,"formControl","change","keydown","keyup"],["matInput","","placeholder","Username",3,"formControl"],["mat-raised-button","","color","primary"],[1,"fa","fa-paper-plane"],["mat-raised-button","","color","basic","routerLink","/users"],[1,"fa","fa-times"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(s.Wb(0,"h1"),s.Rb(1,"i",0),s.Kc(2," Create User Account\n"),s.Vb(),s.Wb(3,"form",1),s.ic("submit",(function(t){return r.submit()})),s.Wb(4,"div",2),s.Wb(5,"div",3),s.Wb(6,"mat-card"),s.Wb(7,"mat-card-content"),s.Ic(8,y,2,1,"div",4),s.Wb(9,"mat-form-field",5),s.Wb(10,"input",6),s.ic("change",(function(t){return r.setUsername()}))("keydown",(function(t){return r.setUsername()}))("keyup",(function(t){return r.setUsername()})),s.Vb(),s.Wb(11,"mat-error"),s.Kc(12),s.Vb(),s.Vb(),s.Wb(13,"mat-form-field",5),s.Wb(14,"input",7),s.ic("change",(function(t){return r.setUsername()}))("keydown",(function(t){return r.setUsername()}))("keyup",(function(t){return r.setUsername()})),s.Vb(),s.Wb(15,"mat-error"),s.Kc(16),s.Vb(),s.Vb(),s.Rb(17,"br"),s.Rb(18,"br"),s.Rb(19,"br"),s.Wb(20,"mat-form-field",5),s.Rb(21,"input",8),s.Wb(22,"mat-error"),s.Kc(23),s.Vb(),s.Vb(),s.Rb(24,"br"),s.Rb(25,"br"),s.Kc(26," Password: "),s.Wb(27,"strong"),s.Kc(28),s.Vb(),s.Vb(),s.Wb(29,"mat-card-actions"),s.Wb(30,"button",9),s.Rb(31,"i",10),s.Kc(32," Submit"),s.Vb(),s.Wb(33,"button",11),s.Rb(34,"i",12),s.Kc(35," Cancel"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&t&&(s.Cb(3),s.sc("formGroup",r.form),s.Cb(5),s.sc("ngIf",r.error),s.Cb(2),s.sc("formControl",r.form.controls.firstname),s.Cb(2),s.Lc(r.form.controls.firstname.errors),s.Cb(2),s.sc("formControl",r.form.controls.lastname),s.Cb(2),s.Lc(r.form.controls.lastname.errors),s.Cb(5),s.sc("formControl",r.form.controls.username),s.Cb(2),s.Lc(r.form.controls.username.errors),s.Cb(5),s.Lc(r.form.controls.password.value))},directives:[a.t,a.l,a.f,l.a,l.c,n.m,d.b,h.a,a.b,a.k,a.d,d.a,l.b,w.b,f.h],styles:[""]}),t}(),R=e("ETwC"),K=e("/RhQ");function U(t,r){1&t&&(s.Wb(0,"th",15),s.Kc(1," Username "),s.Vb())}function k(t,r){if(1&t&&(s.Wb(0,"td",16),s.Rb(1,"i",17),s.Kc(2),s.Vb()),2&t){var e=r.$implicit;s.Cb(2),s.Mc(" ",e.username," ")}}function P(t,r){1&t&&(s.Wb(0,"th",15),s.Kc(1," Firstname "),s.Vb())}function S(t,r){if(1&t&&(s.Wb(0,"td",16),s.Kc(1),s.nc(2,"titlecase"),s.Vb()),2&t){var e=r.$implicit;s.Cb(1),s.Mc(" ",s.oc(2,1,e.firstname)," ")}}function M(t,r){1&t&&(s.Wb(0,"th",15),s.Kc(1," Lastname "),s.Vb())}function L(t,r){if(1&t&&(s.Wb(0,"td",16),s.Kc(1),s.nc(2,"titlecase"),s.Vb()),2&t){var e=r.$implicit;s.Cb(1),s.Mc(" ",s.oc(2,1,e.lastname)," ")}}function D(t,r){1&t&&(s.Wb(0,"th",15),s.Kc(1," Created "),s.Vb())}function F(t,r){if(1&t&&(s.Wb(0,"td",16),s.Kc(1),s.nc(2,"titlecase"),s.nc(3,"dfnsDistanceInWordsToNow"),s.nc(4,"parseDate"),s.Vb()),2&t){var e=r.$implicit;s.Cb(1),s.Mc(" ",s.oc(2,1,s.oc(3,3,s.oc(4,5,e.created_at)))," ")}}function Q(t,r){1&t&&(s.Wb(0,"th",15),s.Kc(1," Actions "),s.Vb())}function T(t,r){if(1&t&&(s.Wb(0,"td",16),s.Wb(1,"button",18),s.Rb(2,"i",19),s.Vb(),s.Vb()),2&t){var e=r.$implicit;s.Cb(1),s.sc("routerLink","/users/"+e.id+"/edit")}}function O(t,r){1&t&&s.Rb(0,"tr",20)}function q(t,r){1&t&&s.Rb(0,"tr",21)}var A=[{path:"",component:function(){function t(t){this.userService=t,this.displayedColumns=["username","firstname","lastname","created_at","actions"],this.users=[],this.queryParams={q:"",page:1},this.meta={},this.d=new Date}return t.prototype.ngOnInit=function(){this.fetchUsers()},t.prototype.fetchUsers=function(){var t=this;this.userService.query({params:this.queryParams}).subscribe((function(r){t.meta=t.userService.getMeta(),t.users=r}))},t.prototype.makeid=function(t){for(var r="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=e.length,n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*o));return r},t.\u0275fac=function(r){return new(r||t)(s.Qb(b))},t.\u0275cmp=s.Kb({type:t,selectors:[["app-index"]],decls:32,vars:4,consts:[[1,"fa","fa-users"],["mat-raised-button","","color","primary","routerLink","/users/create","rou",""],["matInput","","autocomplete","off",3,"ngModel","ngModelChange","keydown.enter"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear"],[1,"fa","fa-search"],["mat-table","",1,"mat-elevation-28",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstname"],["matColumnDef","lastname"],["matColumnDef","created_at"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"fa","fa-user-circle"],["mat-raised-button","","color","basic",3,"routerLink"],[1,"fa","fa-edit"],["mat-header-row",""],["mat-row",""]],template:function(t,r){1&t&&(s.Wb(0,"h1"),s.Rb(1,"i",0),s.Kc(2," Users "),s.Wb(3,"a",1),s.Kc(4,"New"),s.Vb(),s.Vb(),s.Wb(5,"mat-card"),s.Wb(6,"mat-card-header"),s.Wb(7,"mat-form-field"),s.Wb(8,"input",2),s.ic("ngModelChange",(function(t){return r.queryParams.q=t}))("keydown.enter",(function(t){return r.fetchUsers()})),s.Vb(),s.Wb(9,"button",3),s.Rb(10,"i",4),s.Vb(),s.Vb(),s.Vb(),s.Wb(11,"mat-card-content"),s.Wb(12,"table",5),s.Ub(13,6),s.Ic(14,U,2,0,"th",7),s.Ic(15,k,3,1,"td",8),s.Tb(),s.Ub(16,9),s.Ic(17,P,2,0,"th",7),s.Ic(18,S,3,3,"td",8),s.Tb(),s.Ub(19,10),s.Ic(20,M,2,0,"th",7),s.Ic(21,L,3,3,"td",8),s.Tb(),s.Ub(22,11),s.Ic(23,D,2,0,"th",7),s.Ic(24,F,5,7,"td",8),s.Tb(),s.Ub(25,12),s.Ic(26,Q,2,0,"th",7),s.Ic(27,T,3,1,"td",8),s.Tb(),s.Ic(28,O,1,0,"tr",13),s.Ic(29,q,1,0,"tr",14),s.Vb(),s.Rb(30,"br"),s.Rb(31,"br"),s.Vb(),s.Vb()),2&t&&(s.Cb(8),s.sc("ngModel",r.queryParams.q),s.Cb(4),s.sc("dataSource",r.users),s.Cb(16),s.sc("matHeaderRowDef",r.displayedColumns),s.Cb(1),s.sc("matRowDefColumns",r.displayedColumns))},directives:[w.a,f.i,l.a,l.d,d.b,h.a,a.b,a.k,a.n,w.b,d.f,l.c,R.j,R.c,R.e,R.b,R.g,R.i,R.d,R.a,f.h,R.f,R.h],pipes:[n.u,o.c,K.a],styles:["table[_ngcontent-%COMP%]{width:100%}"]}),t}()},{path:"create",component:I},{path:":id/edit",component:g}],H=function(){function t(){}return t.\u0275mod=s.Ob({type:t}),t.\u0275inj=s.Nb({factory:function(r){return new(r||t)},imports:[[f.j.forChild(A)],f.j]}),t}(),j=e("FpXt");e.d(r,"UsersModule",(function(){return x}));var x=function(){function t(){}return t.\u0275mod=s.Ob({type:t}),t.\u0275inj=s.Nb({factory:function(r){return new(r||t)},imports:[[n.c,H,j.a,o.b.forRoot()]]}),t}()}}]);