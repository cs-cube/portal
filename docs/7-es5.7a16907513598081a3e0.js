function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{iSG3:function(t,e,n){"use strict";n.r(e);var i,a=n("ofXK"),r=n("tyNb"),c=n("fXoL"),s=n("fB3y"),o=n("tk/3"),l=((i=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,"printers"))).http=t,n}return _inherits(e,t),e}(s.a)).\u0275fac=function(t){return new(t||i)(c.ec(o.b))},i.\u0275prov=c.Mb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),b=n("Wp6s");function u(t,e){1&t&&(c.Wb(0,"h3"),c.Kc(1,"Loading..."),c.Vb())}var f=function(t){return[t]};function m(t,e){if(1&t&&(c.Wb(0,"a",2),c.Wb(1,"mat-card"),c.Wb(2,"mat-card-content",3),c.Wb(3,"h1",4),c.Rb(4,"i",5),c.Vb(),c.Vb(),c.Wb(5,"mat-card-actions",3),c.Kc(6),c.Vb(),c.Vb(),c.Vb()),2&t){var n=e.$implicit;c.sc("routerLink",c.wc(2,f,"printer/"+n.id)),c.Cb(6),c.Mc(" ",n.description," ")}}var d,h,p=((d=function(){function t(e){_classCallCheck(this,t),this.printerService=e,this.isFetching=!0}return _createClass(t,[{key:"ngOnInit",value:function(){this.fetchPrinters()}},{key:"fetchPrinters",value:function(){var t=this;this.isFetching=!0,this.printerService.query().subscribe((function(e){t.printers=e,t.isFetching=!1}))}}]),t}()).\u0275fac=function(t){return new(t||d)(c.Qb(l))},d.\u0275cmp=c.Kb({type:d,selectors:[["app-index"]],decls:2,vars:2,consts:[[4,"ngIf"],[3,"routerLink",4,"ngFor","ngForOf"],[3,"routerLink"],[1,"text-center"],[1,"printer-icon"],[1,"fa","fa-print"]],template:function(t,e){1&t&&(c.Ic(0,u,2,0,"h3",0),c.Ic(1,m,7,4,"a",1)),2&t&&(c.sc("ngIf",e.isFetching),c.Cb(1),c.sc("ngForOf",e.printers))},directives:[a.l,a.k,r.i,b.a,b.c,b.b],styles:[".mat-card[_ngcontent-%COMP%]{display:inline-block}.printer-icon[_ngcontent-%COMP%]{font-size:150px;margin-bottom:30px}"]}),d),v=n("0IaG"),g=n("gSfl"),C=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))}return _inherits(e,t),e}(g.a),y=n("cPJV"),_=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).quantity=1,t.price=1,t._valid=!1,t}return _inherits(e,t),_createClass(e,[{key:"reset",value:function(){this.size=null,this.quality=null,this.quantity=1,this.price=1,this._valid=!1}},{key:"markAsValid",value:function(){this._valid=!0}},{key:"size_label",get:function(){var t="";switch(this.size){case 1:t="Short";break;case 2:t="Long";break;case 3:t="A4";break;default:t="Custom"}return t}},{key:"quality_label",get:function(){var t="";switch(this.quality){case 1:t="Standard";break;case 2:t="Coloured Text";break;case 3:t="Full Colour Text w/ Graphics";break;default:t="Custom"}return t}},{key:"total",get:function(){return this.quantity*this.price}},{key:"is_ready",get:function(){return this._valid||this.size>0&&this.quality>0&&this.price>0}},{key:"valid",get:function(){return this._valid}}]),e}(g.a),V=n("+0xr"),I=((h=function(t){function e(t){var n;return _classCallCheck(this,e),(n=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t,"print-transactions"))).http=t,n}return _inherits(e,t),e}(s.a)).\u0275fac=function(t){return new(t||h)(c.ec(o.b))},h.\u0275prov=c.Mb({token:h,factory:h.\u0275fac,providedIn:"root"}),h),W=n("WHFS"),w=n("kmnG"),k=n("d3UM"),K=n("3Pt+"),T=n("qFsG"),M=n("bTqV"),P=n("NFeN"),S=n("FKr1"),D=["cancelButton"];function O(t,e){if(1&t&&(c.Wb(0,"mat-option",30),c.Kc(1),c.Vb()),2&t){var n=e.$implicit;c.sc("value",n.id),c.Cb(1),c.Mc(" ",n.fullname," ")}}function R(t,e){1&t&&(c.Wb(0,"th",31),c.Kc(1," Size "),c.Vb())}function q(t,e){if(1&t&&(c.Wb(0,"span"),c.Kc(1),c.Vb()),2&t){var n=c.mc().$implicit;c.Cb(1),c.Lc(n.size_label)}}function $(t,e){if(1&t&&(c.Wb(0,"mat-option",30),c.Kc(1),c.Vb()),2&t){var n=e.$implicit;c.sc("value",n.value),c.Cb(1),c.Lc(n.label)}}function x(t,e){if(1&t){var n=c.Xb();c.Wb(0,"mat-form-field"),c.Wb(1,"mat-select",34),c.ic("ngModelChange",(function(t){return c.Bc(n),c.mc().$implicit.size=t})),c.Ic(2,$,2,2,"mat-option",7),c.Vb(),c.Vb()}if(2&t){var i=c.mc().$implicit,a=c.mc();c.Cb(1),c.sc("ngModel",i.size),c.Cb(1),c.sc("ngForOf",a.sizes)}}function z(t,e){if(1&t&&(c.Wb(0,"td",32),c.Ic(1,q,2,1,"span",33),c.Ic(2,x,3,2,"mat-form-field",33),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.sc("ngIf",n.valid),c.Cb(1),c.sc("ngIf",!n.valid)}}function F(t,e){1&t&&(c.Wb(0,"th",31),c.Kc(1," Quality "),c.Vb())}function U(t,e){if(1&t&&(c.Wb(0,"span"),c.Kc(1),c.Vb()),2&t){var n=c.mc().$implicit;c.Cb(1),c.Lc(n.quality_label)}}function j(t,e){if(1&t&&(c.Wb(0,"mat-option",30),c.Kc(1),c.Vb()),2&t){var n=e.$implicit;c.sc("value",n.value),c.Cb(1),c.Lc(n.label)}}function Q(t,e){if(1&t){var n=c.Xb();c.Wb(0,"mat-form-field"),c.Wb(1,"mat-select",36),c.ic("ngModelChange",(function(t){return c.Bc(n),c.mc().$implicit.quality=t})),c.Ic(2,j,2,2,"mat-option",7),c.Vb(),c.Vb()}if(2&t){var i=c.mc().$implicit,a=c.mc();c.Cb(1),c.sc("ngModel",i.quality),c.Cb(1),c.sc("ngForOf",a.qualities)}}function L(t,e){if(1&t&&(c.Wb(0,"td",35),c.Ic(1,U,2,1,"span",33),c.Ic(2,Q,3,2,"mat-form-field",33),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.sc("ngIf",n.valid),c.Cb(1),c.sc("ngIf",!n.valid)}}function B(t,e){1&t&&(c.Wb(0,"th",31),c.Kc(1," Quantity "),c.Vb())}function H(t,e){if(1&t&&(c.Wb(0,"span"),c.Kc(1),c.Vb()),2&t){var n=c.mc().$implicit;c.Cb(1),c.Lc(n.quantity)}}function N(t,e){if(1&t){var n=c.Xb();c.Wb(0,"mat-form-field"),c.Wb(1,"input",38),c.ic("ngModelChange",(function(t){return c.Bc(n),c.mc().$implicit.quantity=t})),c.Vb(),c.Vb()}if(2&t){var i=c.mc().$implicit;c.Cb(1),c.sc("ngModel",i.quantity)}}function X(t,e){if(1&t&&(c.Wb(0,"td",37),c.Ic(1,H,2,1,"span",33),c.Ic(2,N,2,1,"mat-form-field",33),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.sc("ngIf",n.valid),c.Cb(1),c.sc("ngIf",!n.valid&&n.is_ready)}}function Y(t,e){1&t&&(c.Wb(0,"th",39),c.Kc(1," Price "),c.Vb())}function A(t,e){if(1&t&&(c.Wb(0,"span"),c.Kc(1),c.Vb()),2&t){var n=c.mc().$implicit;c.Cb(1),c.Lc(n.price)}}function E(t,e){if(1&t&&(c.Wb(0,"td",37),c.Ic(1,A,2,1,"span",33),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.sc("ngIf",n.is_ready)}}function G(t,e){1&t&&(c.Wb(0,"th",40),c.Kc(1," Total "),c.Vb())}function J(t,e){if(1&t&&(c.Wb(0,"span"),c.Kc(1),c.Vb()),2&t){var n=c.mc().$implicit;c.Cb(1),c.Lc(n.total)}}function Z(t,e){if(1&t&&(c.Wb(0,"td",37),c.Ic(1,J,2,1,"span",33),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.sc("ngIf",n.is_ready)}}function tt(t,e){1&t&&c.Rb(0,"th",41)}function et(t,e){if(1&t){var n=c.Xb();c.Wb(0,"button",44),c.ic("click",(function(t){c.Bc(n);var e=c.mc().$implicit;return c.mc().addItem(e)})),c.Rb(1,"i",45),c.Vb()}}function nt(t,e){if(1&t&&(c.Wb(0,"td",42),c.Ic(1,et,2,0,"button",43),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.sc("ngIf",!n.valid)}}function it(t,e){1&t&&c.Rb(0,"tr",46)}function at(t,e){1&t&&c.Rb(0,"tr",47)}var rt,ct=((rt=function(){function t(e,n,i,a){_classCallCheck(this,t),this.dialogRef=e,this.printTransactionService=n,this.modalService=i,this.matData=a,this.members=[{id:"1",fullname:"Anonymous"}],this.sizes=[{value:1,label:"Short"},{value:2,label:"Long"}],this.qualities=[{value:1,label:"Standard"},{value:2,label:"Colored Text"}],this.transactionItemTableColumns=["size","quality","quantity","price","total","action"],this.transaction=new C,this.transaction.member_id="1",this.transaction.time=y(new Date,"MMM DD, YYYY hh:mm A"),this.transaction_items=new V.k([new _])}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){}},{key:"addItem",value:function(t){if(t.size&&t.quality){var e=!1;this.transaction_items.data.forEach((function(n,i){!e&&n.valid&&n.size===t.size&&n.quality===t.quality&&(e=!0,n.quantity+=t.quantity)})),e?t.reset():(t.markAsValid(),this.transaction_items.data.push(new _)),this.transaction_items.connect().next(this.transaction_items.data),console.log(this.transaction_items)}}},{key:"saveTransaction",value:function(){var t=this;this.transaction.transaction_items=this.transaction_items.data.filter((function(t){return t.valid})),this.transaction.printer_id=this.matData.printer.id,this.printTransactionService.create(this.transaction).subscribe((function(e){t.modalService.toast("Transaction saved!"),t.dialogRef.close(e)}),(function(e){t.modalService.toast("Error occured","Ooops!","danger")}))}}]),t}()).\u0275fac=function(t){return new(t||rt)(c.Qb(v.g),c.Qb(I),c.Qb(W.a),c.Qb(v.a))},rt.\u0275cmp=c.Kb({type:rt,selectors:[["app-create-transaction"]],viewQuery:function(t,e){var n;1&t&&c.Pc(D,!0),2&t&&c.zc(n=c.jc())&&(e.cancelButton=n.first)},decls:48,vars:8,consts:[["mat-dialog-title",""],[1,"fa","fa-print"],[1,"mat-typography"],[1,"row"],[1,"col-lg-3"],[1,"full-width"],[3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["matInput","","disabled","","value","Sushi",3,"ngModel","ngModelChange"],[1,"col-lg-12"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","size"],["mat-header-cell","","style","width: 20%;",4,"matHeaderCellDef"],["mat-cell","","class","pr-3",4,"matCellDef"],["matColumnDef","quality"],["mat-cell","","class","p-2",4,"matCellDef"],["matColumnDef","quantity"],["mat-cell","","class","text-center",4,"matCellDef"],["matColumnDef","price"],["mat-header-cell","","style","width: 20%;","class","text-center",4,"matHeaderCellDef"],["matColumnDef","total",2,"width","10%"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-raised-button","",3,"disabled","click"],["mat-button","","mat-dialog-close",""],[3,"value"],["mat-header-cell","",2,"width","20%"],["mat-cell","",1,"pr-3"],[4,"ngIf"],["aria-placeholder","Size",3,"ngModel","ngModelChange"],["mat-cell","",1,"p-2"],["aria-placeholder","Quality",3,"ngModel","ngModelChange"],["mat-cell","",1,"text-center"],["matInput","","type","number","autocomplete","off","min","1",1,"text-center",3,"ngModel","ngModelChange"],["mat-header-cell","",1,"text-center",2,"width","20%"],["mat-header-cell","",1,"text-center"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","",3,"click",4,"ngIf"],["mat-raised-button","",3,"click"],[1,"fa","fa-plus"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.Wb(0,"h2",0),c.Rb(1,"i",1),c.Kc(2," New Print Transaction"),c.Vb(),c.Wb(3,"mat-dialog-content",2),c.Wb(4,"div",3),c.Wb(5,"div",4),c.Wb(6,"mat-form-field",5),c.Wb(7,"mat-label"),c.Kc(8,"Member"),c.Vb(),c.Wb(9,"mat-select",6),c.ic("ngModelChange",(function(t){return e.transaction.member_id=t})),c.Ic(10,O,2,2,"mat-option",7),c.Vb(),c.Vb(),c.Vb(),c.Wb(11,"div",4),c.Wb(12,"mat-form-field",5),c.Wb(13,"mat-label"),c.Kc(14,"Transacttion Time"),c.Vb(),c.Wb(15,"input",8),c.ic("ngModelChange",(function(t){return e.transaction.time=t})),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(16,"div",3),c.Wb(17,"div",9),c.Wb(18,"table",10),c.Ub(19,11),c.Ic(20,R,2,0,"th",12),c.Ic(21,z,3,2,"td",13),c.Tb(),c.Ub(22,14),c.Ic(23,F,2,0,"th",12),c.Ic(24,L,3,2,"td",15),c.Tb(),c.Ub(25,16),c.Ic(26,B,2,0,"th",12),c.Ic(27,X,3,2,"td",17),c.Tb(),c.Ub(28,18),c.Ic(29,Y,2,0,"th",19),c.Ic(30,E,2,1,"td",17),c.Tb(),c.Ub(31,20),c.Ic(32,G,2,0,"th",21),c.Ic(33,Z,2,1,"td",17),c.Tb(),c.Ub(34,22),c.Ic(35,tt,1,0,"th",23),c.Ic(36,nt,2,1,"td",24),c.Tb(),c.Ic(37,it,1,0,"tr",25),c.Ic(38,at,1,0,"tr",26),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(39,"mat-dialog-actions",27),c.Wb(40,"button",28),c.ic("click",(function(t){return e.saveTransaction()})),c.Wb(41,"mat-icon"),c.Kc(42,"save"),c.Vb(),c.Kc(43," Save Transaction"),c.Vb(),c.Wb(44,"button",29),c.Wb(45,"mat-icon"),c.Kc(46,"remove"),c.Vb(),c.Kc(47," Cancel"),c.Vb(),c.Vb()),2&t&&(c.Cb(9),c.sc("ngModel",e.transaction.member_id)("disabled",!0),c.Cb(1),c.sc("ngForOf",e.members),c.Cb(5),c.sc("ngModel",e.transaction.time),c.Cb(3),c.sc("dataSource",e.transaction_items),c.Cb(19),c.sc("matHeaderRowDef",e.transactionItemTableColumns),c.Cb(1),c.sc("matRowDefColumns",e.transactionItemTableColumns),c.Cb(2),c.sc("disabled",e.transaction_items.data.length<=1||!e.transaction_items.data[0].is_ready))},directives:[v.h,v.e,w.b,w.e,k.a,K.k,K.n,a.k,T.a,K.b,V.j,V.c,V.e,V.b,V.g,V.i,v.c,M.b,P.a,v.d,S.h,V.d,V.a,a.l,K.p,V.f,V.h],styles:[""]}),rt),st=n("iPKQ"),ot=n("MutI"),lt=n("kIIl"),bt=n("/RhQ");function ut(t,e){if(1&t&&(c.Wb(0,"span"),c.Kc(1),c.Vb()),2&t){var n=c.mc();c.Cb(1),c.Mc("on ",n.printer.description,"")}}function ft(t,e){1&t&&(c.Wb(0,"span"),c.Kc(1,"Previous"),c.Vb())}function mt(t,e){if(1&t){var n=c.Xb();c.Wb(0,"mat-card-subtitle"),c.Wb(1,"button",13),c.ic("click",(function(t){return c.Bc(n),c.mc(2).newTransaction()})),c.Rb(2,"i",14),c.Kc(3," New"),c.Vb(),c.Vb()}}function dt(t,e){1&t&&(c.Wb(0,"th",15),c.Kc(1," Time "),c.Vb())}function ht(t,e){if(1&t&&(c.Wb(0,"td",16),c.Kc(1),c.nc(2,"dfnsFormat"),c.nc(3,"parseDate"),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Mc(" ",c.pc(2,1,c.oc(3,4,n.time),"MMM DD, YYYY hh:mm A")," ")}}function pt(t,e){1&t&&(c.Wb(0,"th",15),c.Kc(1," Sales "),c.Vb())}function vt(t,e){if(1&t&&(c.Wb(0,"td",16),c.Kc(1),c.Vb()),2&t){var n=e.$implicit;c.Cb(1),c.Mc(" ",n.sales," ")}}function gt(t,e){1&t&&c.Rb(0,"tr",17)}function Ct(t,e){1&t&&c.Rb(0,"tr",18)}function yt(t,e){if(1&t){var n=c.Xb();c.Wb(0,"mat-card"),c.Wb(1,"mat-card-header"),c.Wb(2,"mat-card-title",19),c.Kc(3,"No Current User"),c.Vb(),c.Vb(),c.Wb(4,"mat-card-content"),c.Wb(5,"button",13),c.ic("click",(function(t){return c.Bc(n),c.mc(2).joinPrinting()})),c.Kc(6,"Join Printing Session"),c.Vb(),c.Vb(),c.Vb()}}function _t(t,e){1&t&&(c.Wb(0,"mat-list-item",23),c.Kc(1,"Only 1 user can join the printing session as of now."),c.Vb())}function Vt(t,e){if(1&t){var n=c.Xb();c.Wb(0,"button",24),c.ic("click",(function(t){return c.Bc(n),c.mc(3).leavePrinting()})),c.Kc(1,"Leave Printing"),c.Vb()}}function It(t,e){if(1&t&&(c.Wb(0,"mat-card"),c.Wb(1,"mat-card-header"),c.Wb(2,"mat-card-title"),c.Kc(3,"Current Session"),c.Vb(),c.Vb(),c.Wb(4,"mat-card-content"),c.Wb(5,"mat-list"),c.Wb(6,"mat-list-item"),c.Kc(7),c.Vb(),c.Wb(8,"mat-list-item"),c.Kc(9),c.Vb(),c.Ic(10,_t,2,0,"mat-list-item",20),c.Vb(),c.Vb(),c.Wb(11,"mat-card-actions",21),c.Ic(12,Vt,2,0,"button",22),c.Vb(),c.Vb()),2&t){var n=c.mc(2);c.Cb(7),c.Mc("User: ",n.printer.current_session.user.firstname,""),c.Cb(2),c.Mc("Total Sales: P ",n.printer.current_session.sales,""),c.Cb(1),c.sc("ngIf",n.printer.current_session&&n.printer.current_session.user.id!=n.currentUser.id),c.Cb(2),c.sc("ngIf",n.printer.current_session&&n.printer.current_session.user.id==n.currentUser.id)}}function Wt(t,e){if(1&t&&(c.Wb(0,"div",3),c.Wb(1,"div",4),c.Wb(2,"mat-card"),c.Wb(3,"mat-card-header"),c.Wb(4,"mat-card-title"),c.Ic(5,ft,2,0,"span",1),c.Kc(6," Transactions"),c.Vb(),c.Ic(7,mt,4,0,"mat-card-subtitle",1),c.Vb(),c.Wb(8,"mat-card-content"),c.Wb(9,"table",5),c.Ub(10,6),c.Ic(11,dt,2,0,"th",7),c.Ic(12,ht,4,6,"td",8),c.Tb(),c.Ub(13,9),c.Ic(14,pt,2,0,"th",7),c.Ic(15,vt,2,1,"td",8),c.Tb(),c.Ic(16,gt,1,0,"tr",10),c.Ic(17,Ct,1,0,"tr",11),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(18,"div",12),c.Ic(19,yt,7,0,"mat-card",1),c.Ic(20,It,13,4,"mat-card",1),c.Vb(),c.Vb()),2&t){var n=c.mc();c.Cb(5),c.sc("ngIf",!n.printer.current_session),c.Cb(2),c.sc("ngIf",n.printer.current_session&&n.printer.current_session.user.id==n.currentUser.id),c.Cb(2),c.sc("dataSource",n.transactions),c.Cb(7),c.sc("matHeaderRowDef",n.transactionTableColumns),c.Cb(1),c.sc("matRowDefColumns",n.transactionTableColumns),c.Cb(2),c.sc("ngIf",!n.printer.current_session),c.Cb(1),c.sc("ngIf",n.printer.current_session)}}var wt,kt,Kt=[{path:"",component:p},{path:"printer/:id",component:(wt=function(){function t(e,n,i,a,r,c){_classCallCheck(this,t),this.activatedRoute=e,this.printerService=n,this.printTransactionService=i,this.authenticationService=a,this.modalService=r,this.dialog=c,this.transactionTableColumns=["time","sales"],this.transactions=new V.k,this.currentUser=a.currentUser}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.printerService.read(this.activatedRoute.snapshot.params.id).subscribe((function(e){t.setPrinter(e)}))}},{key:"setPrinter",value:function(t){this.printer=t,this.fetchTransactions()}},{key:"fetchTransactions",value:function(){var t=this;this.printTransactionService.query({params:{printer_id:this.printer.id,user_id:this.currentUser.id}}).subscribe((function(e){t.transactions.connect().next(e)}))}},{key:"newTransaction",value:function(){var t=this;console.log(this.transactions.data),this.dialog.open(ct,{width:"900px",disableClose:!0,data:{printer:this.printer}}).afterClosed().subscribe((function(e){e&&(t.transactions.data.unshift(e),t.transactions.connect().next(t.transactions.data),t.printer.current_session.sales=Number(t.printer.current_session.sales)+Number(e.sales))}))}},{key:"joinPrinting",value:function(){var t=this;this.printer.set_session_user_id=this.currentUser.id,this.printerService.update(this.printer).subscribe((function(e){t.setPrinter(e),t.modalService.toast("You successfully joined the printing session")}),(function(t){}))}},{key:"leavePrinting",value:function(){var t=this;this.printer.unset_session_user_id=this.currentUser.id,this.printerService.update(this.printer).subscribe((function(e){t.setPrinter(e),t.modalService.toast("You successfully leaved the printing session")}),(function(t){}))}}]),t}(),wt.\u0275fac=function(t){return new(t||wt)(c.Qb(r.a),c.Qb(l),c.Qb(I),c.Qb(st.a),c.Qb(W.a),c.Qb(v.b))},wt.\u0275cmp=c.Kb({type:wt,selectors:[["app-show"]],decls:5,vars:2,consts:[[1,"fa","fa-print"],[4,"ngIf"],["class","row",4,"ngIf"],[1,"row"],[1,"col-lg-8"],["mat-table","",1,"full-width",3,"dataSource"],["matColumnDef","time"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","sales"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"col-lg-4"],["mat-raised-button","","color","primary",3,"click"],[1,"fa","fa-plus"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"text-muted"],["class","text-danger",4,"ngIf"],["align","end"],["mat-raised-button","","color","error",3,"click",4,"ngIf"],[1,"text-danger"],["mat-raised-button","","color","error",3,"click"]],template:function(t,e){1&t&&(c.Wb(0,"h1"),c.Rb(1,"i",0),c.Kc(2," Print Transactions "),c.Ic(3,ut,2,1,"span",1),c.Vb(),c.Ic(4,Wt,21,7,"div",2)),2&t&&(c.Cb(3),c.sc("ngIf",e.printer),c.Cb(1),c.sc("ngIf",e.printer))},directives:[a.l,b.a,b.d,b.g,b.c,V.j,V.c,V.e,V.b,V.g,V.i,b.f,M.b,V.d,V.a,V.f,V.h,ot.a,ot.b,b.b],pipes:[lt.d,bt.a],styles:[""]}),wt)}],Tt=((kt=function t(){_classCallCheck(this,t)}).\u0275mod=c.Ob({type:kt}),kt.\u0275inj=c.Nb({factory:function(t){return new(t||kt)},imports:[[r.j.forChild(Kt)],r.j]}),kt),Mt=n("FpXt");n.d(e,"PrintingModule",(function(){return St}));var Pt,St=((Pt=function t(){_classCallCheck(this,t)}).\u0275mod=c.Ob({type:Pt}),Pt.\u0275inj=c.Nb({factory:function(t){return new(t||Pt)},imports:[[a.c,Tt,Mt.a]]}),Pt)}}]);